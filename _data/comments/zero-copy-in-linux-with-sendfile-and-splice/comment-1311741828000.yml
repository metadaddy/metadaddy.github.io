name: Mukesh
date: '2011-07-26 21:43:48'
url: ''
message: "Pat,\n\nAfter profiling (for CPU cycles) before and after the addition of above patch here is what I found (Note I am having patch to support greater than 16K buffer, hence using 128K):\n\nBefore changes\n--------------------\n%\t        app name\t    symbol name\n22.759\tvmlinux\t__copy_user_inatomic\n21.495\tvmlinux\t__copy_user\n3.2354\text2.ko\t.text\n2.8263\tvmlinux\tdo_ade\n2.752\tfusivlib_lkm.ko\tmips_flush_inv_entire_dcache\n2.6776\tvmlinux\thandle_adel_int\n1.8222\tvmlinux\t__bzero\n....\n\nAfter the patch:\n\n%\t        app name\t    symbol name\n37.4879\tvmlinux\t__copy_user\n7.0531\tvmlinux\t__bzero\n2.7375\text2.ko\t.text\n2.5765\tfusivlib_lkm.ko\tmips_flush_inv_entire_dcache\n2.2544\tvmlinux\tdo_ade\n2.2544\tvmlinux\thandle_adel_int\n1.8357\tvmlinux\tget_page_from_freelist\n1.8035\tnf_conntrack.ko\t.text\n...\n\nIf you notice __copy_user_inatomic usage has pretty much gone but __copy_user() usage has increased to almost same proportion. Also __Bzero() usage has increased considerably.\n\nBased on above experience its hard to believe the benefit of using splice over read/write and actually achieving zero-copy.\n\n-Mukesh Kohli"
email: 965aaeec53720e6f06f621303dd70403
